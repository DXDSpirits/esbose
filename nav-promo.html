<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">

    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui">
    <meta http-equiv="cleartype" content="on">

    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/images/touch/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/images/touch/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/images/touch/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/images/touch/apple-touch-icon-57x57-precomposed.png">
    <link rel="shortcut icon" sizes="196x196" href="assets/images/touch/touch-icon-196x196.png">
    <link rel="shortcut icon" href="assets/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="assets/images/touch/apple-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#222222">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- For iOS web apps. Delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="">
    <title>最新推荐</title>
    <link rel="stylesheet" href="assets/stylesheets/bootstrap.css">
    <link rel="stylesheet" href="assets/stylesheets/font-awesome.css">
    <link rel="stylesheet" href="assets/stylesheets/amour.css">
    <link rel="stylesheet" href="assets/stylesheets/app.css">
    <script src="assets/javascripts/vendor/modernizr-2.7.1.min.js"></script>
</head>
<body>
    
    <div class="view" id="view-nav-promo">
        <div class="background img" data-bg-src="images/nav-promo-bg.jpg"></div>
        <div class="menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <div class="menu hidden">
            <div class="menu-item" data-item='0'>活动1</div>
            <div class="menu-item" data-item='1'>活动2</div>
            <div class="menu-item" data-item='2'>活动3</div>
            <div class="menu-item" data-item='3'>活动4</div>
            <div class="menu-item" data-item='4'>活动5</div>
        </div>
        <div class="viewport">
            <div class="scroll">
                <div class="scroll-inner">
                    <div class="promo-item">
                        <div class="img" data-bg-src="images/cars-slide-1.jpg"></div>
                    </div>
                    <div class="promo-item">
                        <div class="img" data-bg-src="images/cars-slide-2.jpg"></div>
                    </div>
                    <div class="promo-item">
                        <div class="img" data-bg-src="images/cars-slide-3.jpg"></div>
                    </div>
                    <div class="promo-item">
                        <div class="img" data-bg-src="images/cars-slide-1.jpg"></div>
                    </div>
                    <div class="promo-item">
                        <div class="img" data-bg-src="images/cars-slide-2.jpg"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <script src="assets/javascripts/vendor/jquery-1.10.2.min.js"></script>
    <script src="assets/javascripts/vendor/underscore.min.js"></script>
    <script src="assets/javascripts/vendor/mustache.min.js"></script>
    <script src="assets/javascripts/vendor/backbone.min.js"></script>
    <script src="assets/javascripts/vendor/bootstrap.min.js"></script>

    <script src="assets/javascripts/plugins/fastclick.js"></script>
    <script src="assets/javascripts/plugins/moment.js"></script>
    <script src="assets/javascripts/plugins/moment.zh-cn.js"></script>

    <script src="assets/configs.js"></script>
    <script src="assets/javascripts/amour.js"></script>
    <script src="assets/javascripts/plugins/iscroll-probe.js"></script>
    <script>
        (function() {
            var n = 5, w = $(window).width() * 0.7;
            $('.scroll-inner').css('width', w * n);
            $('.scroll, .promo-item').css('width', w);
            var scroller = new IScroll('.scroll', {
                snap: true,
                snapStepX: w,
                scrollY: false,
                scrollX: true,
                momentum: false,
                bounce: false,
                probeType: 3
            });
            var scaleCSS = function(scale) {
                var transform = 'scale3d(' + scale + ','+ scale +', 1)';
                return {
                    'transform': transform,
                    '-webkit-transform': transform
                };
            };
            var onScroll = function() {
                var page = scroller.currentPage.pageX;
                var $prev = $($('.promo-item')[page-1]);
                var $cur = $($('.promo-item')[page]);
                var $next = $($('.promo-item')[page+1]);
                var left = page * w;
                var dis = -scroller.x - left;
                if (dis > 0) {
                    var percent = dis / w;
                    //console.log(percent);
                    $next.find('.img').css(scaleCSS(1 + 0.2 * percent));
                    $cur.find('.img').css(scaleCSS(1.2 - 0.2 * percent));
                } else {
                    dis = -dis;
                    var percent = dis / w;
                    //console.log(percent);
                    $prev.find('.img').css(scaleCSS(1 + 0.2 * percent));
                    $cur.find('.img').css(scaleCSS(1.2 - 0.2 * percent));
                }
                $('.menu').addClass('hidden');
            };
            onScroll();
            scroller.on('scroll', onScroll);
            
            $('.menu-icon').on('click', function() {
                $('.menu').toggleClass('hidden');
            });
            $('.menu-item').on('click', function(e) {
                var item = +$(e.currentTarget).data('item');
                scroller.goToPage(item, 0);
            });
        })();
    </script>
    
</body>
</html>
